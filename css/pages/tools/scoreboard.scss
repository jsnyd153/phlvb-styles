@use "sass:color";
@use "../../globals/abstracts" as *;

@font-face {
	font-family: "Material Symbols Outlined";
	font-style: normal;
	font-weight: 100 700;
	src: url(https://fonts.gstatic.com/s/materialsymbolsoutlined/v166/kJEhBvYX7BgnkSrUwT8OhrdQw4oELdPIeeII9v6oFsLjBuVY.woff2)
		format("woff2");
}

.t- {
	&score {
		&-wrapper {
			width: 100svw;
			height: 100svh;
			@include theme-brand;
			@include touch {
				touch-action: manipulation;
			}
		}
		&-display {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 0.25rem;
			width: 100%;
			height: 100%;

			&-team {
				--inset: 2rem;
				--service_indicator-size: 0.5rem;
				--team_color: #{$brand-900};
				// --team_color: attr(data-color);
				align-self: stretch;
				justify-self: stretch;
				background-color: var(--t-background_color);
				background: radial-gradient(
						50% 50% at 50% 50%,
						rgba(0, 0, 0, 0.6) 0%,
						rgba(102, 102, 102, 0.06) 100%
					),
					var(--t-background_color, #{$brand-900});
				background-blend-mode: multiply, normal;
				container-type: inline-size;
				container-name: team-display;

				&::before {
					content: attr(team-name);
					width: 100%;
					text-align: center;
					display: block;
					position: relative;
					font-family: "Trade Gothic Next LT Pro";
					font-style: normal;
					font-weight: 600;
					font-size: 6cqi;
					line-height: 38px;
					text-align: center;
					color: #ffffff;
					z-index: 1;
					top: calc(var(--inset) + 2cqi);
				}
				&::after {
					content: attr(team-score);
					@include t-center;
					display: block;
					// font-family: "Trade Gothic Next LT Pro";
					font-style: normal;
					// font-weight: 800;
					font-size: 50cqi;
					line-height: 1;
					leading-trim: both;
					text-edge: cap;
					text-align: center;
					text-transform: capitalize;
					color: #ffffff;
					z-index: 0;
					padding-top: 3%;

					font-family: "Chivo Mono", monospace;
					font-style: normal;
					font-weight: 900;
				}
			}
			&-service {
				display: flex;
				gap: 0.375rem;
				width: 100%;
				justify-content: center;
				position: absolute;
				bottom: 0;
				padding-block: calc((var(--inset, 2rem) - var(--service_indicator-size, 0.5rem)) / 2);
				span {
					background-color: white;
					height: var(--service_indicator-size, 0.5rem);
					width: var(--service_indicator-size, 0.5rem);
					display: block;
					border-radius: 50%;
					opacity: 0.3;

					[team-server-number="1"] &:nth-child(1),
					[team-server-number="2"] &:nth-child(2),
					[team-server-number="3"] &:nth-child(3),
					[team-server-number="4"] &:nth-child(4),
					[team-server-number="5"] &:nth-child(5),
					[team-server-number="6"] &:nth-child(6) {
						opacity: 1;
					}
				}
			}
			&-button_overlay {
				position: absolute;
				z-index: 101;
				inset: var(--inset, 2rem);
				// touch-action: manipulation;
				[score-type="sideout"] [team-serve="current"] & {
					border: 1px solid white;
				}
				[score-type="sideout"] [team-serve=""] & {
					pointer-events: none;
				}
			}
			&-button {
				display: block;
				border: 0;
				outline: 0;
				opacity: 0.05;
				height: 50%;
				width: 100%;
				&[score-action="up"] {
					background-color: white;
				}
				&[score-action="down"] {
					background-color: black;
				}
			}
		}
	}

	&sideout-indicator {
		height: 2rem;
		font-size: 1rem;
		background-color: white;
		padding: 0 1em;
		display: none;

		.t-score-wrapper[score-type="sideout"] & {
			display: block;
		}

		&::after,
		&::before {
			content: "";
			display: block;
			width: 0;
			height: 0;
			border-top: 1em solid transparent;
			border-bottom: 1em solid transparent;
			position: absolute;
			top: 0;
		}

		.t-score-wrapper[score-type="sideout"]:has(#home-display[team-serve="current"]) & {
			border-radius: 0.25rem 0px 0px 0.25rem;
			&::before {
				left: 100%;
				border-left: 1em solid white;
			}
		}
		.t-score-wrapper[score-type="sideout"]:has(#away-display[team-serve="current"]) & {
			border-radius: 0 0.25rem 0.25rem 0;
			&::after {
				right: 100%;

				border-right: 1em solid white;
			}
		}
	}

	&control-panel {
		/* control-panel */

		/* Auto layout */
		display: flex;
		flex-direction: column;
		align-items: center;
		padding: 24/16 * 1rem;
		gap: 32/16 * 1rem;
		background: #ffffff;
		width: 100%;
		box-sizing: border-box;
		border-radius: 16px 16px 0px 0px;
		position: relative;
		&-wrapper {
			display: flex;
			flex-direction: column;
			justify-content: flex-end;
			align-items: center;
			padding: 0px;
			position: fixed;
			width: 100%;
			height: 100%;
			inset: 0;
			translate: 0 100%;
			transition: 0.3s translate;
			[nav-state="active"] & {
				translate: 0 0;
			}
		}
		&-close {
			@include cover_obj;
			background: rgba(0, 0, 0, 0.2);
			backdrop-filter: blur(5px);
		}
		&-thumb {
			width: 61px;
			height: 7px;
			background: #d9d9d9;
			border-radius: 8px;
		}
		&-teams {
			display: flex;
			gap: 2rem;
			width: 100%;
			justify-content: stretch;
		}
		&-game {
			display: flex;
			width: 100%;
			gap: 1rem;
		}
	}
}

.team-controls {
	display: flex;
	flex-direction: column;
	gap: 1rem;
	flex-grow: 1;
	.input-group {
		display: flex;
		gap: 1rem;
		align-items: stretch;
		justify-content: stretch;
	}
	.text_input,
	.number_input {
		border: 1px solid var(--theme_color-900);
		padding: 0.75rem 0.675rem;
		flex-grow: 1;
		border-radius: 0.25rem;
		display: flex;
		align-items: center;

		&:focus-within {
			border: 1px solid var(--theme_color-500);
		}
		label {
			display: none;
		}
		input {
			width: 100%;
			outline: 0;
			border: 0;
			font-size: 1rem;
		}
	}
	.color_input {
		aspect-ratio: 1;
		border: 1px solid var(--theme_color-900);
		padding: 0.25rem;
		// flex-grow: 1;
		border-radius: 0.25rem;
		label {
			display: none;
		}
		input {
			width: 2.5rem;
			height: 2.5rem;
			background: none;
			background-attachment: scroll;
			border: 0;
			outline: 0;
		}
	}
}

.t-sideout-indicator {
	position: fixed;
	@include t-center;
}

.t-navigation-toggle {
	position: fixed;
	@include t-center;
	top: 2rem;
	font-family: "Material Symbols Outlined";
	font-weight: normal;
	font-style: normal;
	font-size: 24px;
	line-height: 1;
	letter-spacing: normal;
	text-transform: none;
	display: inline-block;
	white-space: nowrap;
	word-wrap: normal;
	direction: ltr;
	-webkit-font-feature-settings: "liga";
	-webkit-font-smoothing: antialiased;
	font-variation-settings: "FILL" 1, "wght" 400, "GRAD" 0, "opsz" 24;

	background-color: white;
	color: #474646;
	border-radius: 50%;
	aspect-ratio: 1;
	font-size: 2rem;
}

.t-reset-button {
	width: 8rem;
	margin-left: 1rem;
	border-radius: 0.25rem;
}

.t-score-wrapper {
	.tab-container {
		border: 1px solid var(--theme_color-900);
		padding: 0.5rem;
		flex-grow: 1;
	}
	.tab {
		font-size: 1rem;
	}
}
